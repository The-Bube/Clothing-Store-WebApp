<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Clothing Store Dashboard</title>
  <!-- ✅ Correct path to CSS file in /css -->
  <link rel="stylesheet" href="./css/dashboard.css" />
</head>
<body>
  <script>
    // Protect admin dashboard
    const userRole = localStorage.getItem('userRole');
    
    if (!userRole || parseInt(userRole) !== 2) {
      // Not an admin - redirect to homepage
      alert('Access denied. Admin privileges required.');
      window.location.href = '/index.html';
    }
  </script>

  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="logo"> ShopEase </div>
      <nav class="nav">
        <button class="nav-btn active" data-section="overview">Overview</button>
        <button class="nav-btn" data-section="orders">Orders</button>
        <button class="nav-btn" data-section="inventory">Inventory</button>
        <button class="nav-btn" data-section="customers">Customers</button>
      </nav>
    </aside>

    <!-- Main content -->
    <main class="main">
      <header class="top-bar">
        <h1>Dashboard</h1>
      </header>

      <!-- OVERVIEW -->
      <section id="overview-section" class="section visible">
        <div class="cards-grid">
          <div class="card">
            <h3>Total Revenue</h3>
            <p id="kpi-total-revenue">–</p>
          </div>
          <div class="card">
            <h3>Completed Orders</h3>
            <p id="kpi-completed-orders">–</p>
          </div>
          <div class="card">
            <h3>Pending Orders</h3>
            <p id="kpi-pending-orders">–</p>
          </div>
          <div class="card">
            <h3>Low Stock Items</h3>
            <p id="kpi-low-stock">–</p>
          </div>
        </div>

        <h2>Top Customers (View10)</h2>
        <table>
          <thead>
            <tr><th>Customer</th><th>Completed Orders</th><th>Total Spent</th></tr>
          </thead>
          <tbody id="overview-top-customers"></tbody>
        </table>
      </section>

      <!-- ORDERS -->
      <section id="orders-section" class="section">
        <h2>Orders Overview (Views 1,3,8)</h2>
        <table>
          <thead>
            <tr>
              <th>Customer</th>
              <th>Order ID</th>
              <th>Status</th>
              <th>Total Items</th>
              <th>Total Cost</th>
              <th>Vs Avg</th>
            </tr>
          </thead>
          <tbody id="orders-table"></tbody>
        </table>
      </section>

      <!-- INVENTORY -->
      <section id="inventory-section" class="section">
        <h2>Inventory Overview (Views 4,7,9)</h2>

        <div class="cards-grid">
          <div class="card">
            <h3>Total Inventory Value</h3>
            <p id="inv-total-value">–</p>
          </div>
          <div class="card">
            <h3>Locations</h3>
            <p id="inv-locations-count">–</p>
          </div>
        </div>

        <!-- Chart -->
        <h3>Inventory Value by Location (Chart)</h3>
        <div style="background:#fff; border-radius:10px; padding:12px; box-shadow:0 1px 4px rgba(15,23,42,.06); margin-bottom:12px;">
          <canvas id="inv-chart" height="120"></canvas>
        </div>

        <h3>Inventory by Location (View7)</h3>
        <table>
          <thead><tr><th>Location</th><th>Total Value</th></tr></thead>
          <tbody id="inv-by-location"></tbody>
        </table>

        <h3>Low Stock Products (View9)</h3>
        <table>
          <thead>
            <tr><th>Product</th><th>Qty</th><th>Reorder Level</th><th>Location</th></tr>
          </thead>
          <tbody id="inv-low-stock"></tbody>
        </table>
      </section>

      <!-- CUSTOMERS -->
      <section id="customers-section" class="section">
        <h2>Users (View5)</h2>
        <table>
          <thead><tr><th>Name</th><th>User Type</th></tr></thead>
          <tbody id="customers-table"></tbody>
        </table>
      </section>
    </main>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- ✅ Correct path to JS file in /js -->
  <script src="./js/dashboard.js"></script>
</body>
</html>
